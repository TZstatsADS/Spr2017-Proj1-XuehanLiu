{
    "collab_server" : "",
    "contents" : "---\ntitle: \"What Affects the Sale Price of Housing in Ames?\"\nauthor: \"Ruoqi Huang, Xuehan Liu, Yiran Xu\"\npdf_document:\n  fig_caption: yes\noutput: word_document\n---\n####Introduction\nHousing, as a necessity of living, has been a very important thing to people. In this project, we are interested in finding what have been affecting the sales price of housing in Ames in recent years. In general, we will look at the relation of sale prices versus three aspects of houses. They are construction, structure, and quality. For each aspect, we will examine three variables. For construction of the housing, we will study the type of exterior wall material and type of dwelling (house); for structure of the housing, we will look at the above ground living area (in square feet), and the number of bedrooms above ground; for quality of the housing, we will look at the type of heating, and zoning classifications. In addtion, we also investigate the interactions between variables. For interaction terms, we look at how the presence of the central air conditioning affect the relation between sale price and other variables, becasue intuitively, air conditioning should be one of the most important aspects to people to consider when they want to buy a house. We believe all these variables contribute to the sale price of housing, and our project is to check whether all these seven variables indeed affect the sale price remarkably.  \n  \n####Summarizing and cleaning data \nThe data used for analysis in our project is found from Stanford University (URL:http://web.stanford.edu/class/stats191/data/). This dataset contains 2000 observations and 80 variables that were directly related to property sales. We would only focus on seven variables and they are Bldg.Type (type of dwelling), Exterior.1st (exterior covering on house), MS.Zoning (general zoning classification of the sale), Heating (heating type), Central.Air (central air conditioning), Gr.Liv.Area (above ground living area (in square feet)), and Bedroom (the number of Bedrooms above grade).  \n\nWe initially examined each data variable, converted them to the appropriate data type, and recoded NA variables to read as NA rather than as a number. Variables coded as factor variables are Bldg.Type, Exterior.1st, MS.Zoning, Heating, Bedrooms, and Central.Air. Variables coded as numeric variables are Gr.Liv.Area.\n\nWe also added a new variable called GroupPrice. This variable is created by regrouping the sales price according to its quantile. We grouped from the minimum 12790$ to the second quantile 129,00$ as \"lowest\", from the second quantile 129,000$ to median 160,000$ as \"Second lowest\", from the median 160,000$ to the third quantile 213,500$ as \"second highest\", from the third quantile 213,500$ to maximum 755,000$ as \"highest\". Since we have so many categorical variables, in this way, we can investigate the relationship between variables and sale price conveniently. \n```{r,echo=FALSE, message=FALSE, warning=FALSE, results='hide'}\n# Reading data into R\nhouse<-read.csv(\"/Users/xuehan/Dropbox/STAT/stat480/Projects/Project3/ames2000_NAfix.csv\")\n\n# Installing packages\nlibrary(ggplot2)\n\n#add new variable GroupPrice (Grouped Price)\nhouse$GroupPrice<-as.factor(house$SalePrice)\nlevels(house$GroupPrice)[1:199]<-\"Lowest\"\nlevels(house$GroupPrice)[2:129]<-\"Second Lowest\"\nlevels(house$GroupPrice)[3:186]<-\"Second Highest\"\nlevels(house$GroupPrice)[4:304]<-\"Highest\"\nlevels(house$GroupPrice)\n```\nIn addition, grouped some levels of variables together where there are only few cases in those levles. First, for variable Bedroom (number of bedrooms), we grouped houses that has 8 bedrooms together with houses that has 6 bedrooms as \"Above 6\", because there is only one house with 8 bedrooms. Similarly, for vraibles Heating (Heating Type), there are only one data point in category of \"floor\" and \"Wall\", so we combine them with \"Grav\" to form the new level of \"other furnace\"; we also combine \"GasW\" and \"OthW\" as \"steam\", we leave \"GasA\" as \"air furnace\". \n```{r,echo=FALSE, message=FALSE, warning=FALSE, results='hide'}\n# combine two levels of Bedroom together\nlevels(house$Bedroom.AbvGr)[7:8]<-\"Above 6\"\n\n# combine and rename levels of Heating\nlevels(house$Heating)[1]<-\"other furnace\"\nlevels(house$Heating)[2]<-\"air furnace\"\nlevels(house$Heating)[3]<-\"steam\"\nlevels(house$Heating)[4]<-\"other furnace\"\nlevels(house$Heating)[4]<-\"steam\"\nlevels(house$Heating)[4]<-\"other furnace\"\n```\n\n####Question1: How does the Construction of a house affect its sale price?\n####1A. In ames, how does the type of exterior wall material affect the sale price?\nThere are 14 different kinds of materials that are used for the exterior walls. Our hypothesis is that the more expensive the material is used for a house, the higher sale price the house will have. Therefore, we think the houses that use Vinyl Siding(VinylSd) which we think is the most expensive material as the exterior wall materials have the highest price. Cinder block(CBlock) may have the lowest sale price. \n```{r,echo=FALSE, message=FALSE, warning=FALSE, results='hide',fig.height=3, fig.width=7}\nggplot(aes(x=Exterior.1st,fill=GroupPrice),data=house)+geom_bar(position=\"fill\")+scale_fill_brewer(palette=\"Set2\")+xlab(\"Exterior wall material\")+ylab(\"Percent\")+coord_flip()+theme_bw()+ggtitle(\"Figure1: Mosiac plot of Sale Price vs. Exterior Wall Material Type\")+theme(plot.title=element_text(lineheight=.8))\n```\nFrom Figure1 we can tell that Asphalt Shingles(AsphShn) and Cinder Block(CBlock) have the  lowest sale price because they only have one green color. It supports our hypothesis. The material stone is all red which is the highest price, which means the houses whose exterior walls material is stone have the highest sale price. However,after deeper research, we found there is only one data point for stone which is the reason why Stone has the highest sale price. Since there are not enough data for us to analyze stone,it makes the material Cement Board(CemntBd) has the highest sale price.\nTherefore, due to the big variation of the Sale Price,houses with different types of exterior wall material have different sale prices.\n\n####1B. In ames, how does the type of dwelling affect the sale price?\nThere are five levels of dwelling. Our hypothesis is that Two-family Conversion(2fmCon) may have the lowest sale price.We also guess that Single-family Detached(1Fam) has the highest sale price.\n```{r,echo=FALSE, message=FALSE, warning=FALSE, results='hide',fig.height=3, fig.width=7}\nggplot(data=house,aes(reorder(Bldg.Type,SalePrice,mean),SalePrice))+geom_jitter(color=\"blue\")+geom_boxplot()+geom_point(color=\"red\")+xlab(\"Building Type\")+ylab(\"SalePrice\")+coord_flip()+theme_bw()+ggtitle(\"Figure2: Boxplot of Sale Price vs. Types of Dwelling\")\n```\nFrom the boxplot we can tell that Townhouse End Unit(TwnhsE) has the highest mean sale price, but the second highest Single-family Detached(1Fam) has the largest maximum and more outliers on the upper bound.The cheapest type of dwelling is Two-family Conversion(2fmCon) which fits our hypothesis.\nSince different types of dwelling have various prices, we can say that dwelling is a factor that affects sale price. \n\n####Question2: How does the structure of a house affect its sale price?\n####2A.In Ames, how does above ground living area affect the sale price? \nWith more living area above groud, owner of the house would have more space to do whatever they want. Therefore, we hypothesize that the larger above ground living area is, the higher the sale price would be. \n```{r,echo=FALSE, message=FALSE, warning=FALSE, results='hide',fig.height=2, fig.width=6}\nfit = lm(SalePrice ~ Gr.Liv.Area, data = house)\nggplot(data=house, aes(x=Gr.Liv.Area,y=SalePrice)) + \n  geom_point(position=position_jitter(w=0.1,h=0)) +\n   geom_smooth(method=\"lm\", se=FALSE) +theme_bw()+ggtitle(\"Figure3. Relationship of Sale Price vs. Living Area\")\nfit1 = lm(SalePrice ~ Gr.Liv.Area, data = subset(house,Gr.Liv.Area<2000))\n```\nFigure 3 is the scatter plot of above ground living area and sale price with a least squared linear regression line. From the graph, we can see that sale price and area above ground living area are positively related, except an outlier at area above ground living above 5000. The correlation between them is around 0.735 exluding the outlier. R-square is about 0.52. Considering there are so many other factor to influence sale price, the R square of 0.52 is reasonable. Look more closely, the residual seems to be larger and larger as living area increases. It might because that when people feel they have enough living area, it does not contribute a lot to the sale price anymore.Other characteristic of house become important in determing the sale price. \n\n####2B.In Ames, how does the number of bedrooms above ground affect the sale price? \nIntuitively, more bedrooms above ground suggest more rooms and space in a house. Therefore, we hypothesize that the greater the number of bedrooms are, the higher the sale price would be. \n```{r,echo=FALSE, message=FALSE, warning=FALSE, results='hide',fig.height=3, fig.width=7}\n#qplot(data=house,reorder(Bedroom.AbvGr,SalePrice,mean),SalePrice,geom=\"boxplot\")+coord_flip()\nggplot(data=house,aes(reorder(Bedroom.AbvGr,SalePrice,mean),SalePrice))+\n  geom_jitter(colour=\"blue\")+\n  geom_boxplot(colour=\"red\")+\n coord_flip() +theme_bw()+ggtitle(\"Figure4.Boxplot of Sale Price vs. Number of Bedrooms\")\n```\nFigure 4 shows the boxplot of sale price and the number of houses reordered by mean value of sale price. From the graph, we can see that on average, houses with six or more bedrooms tend to be sold at lowest price.Average sale price of houses with tow bedrooms are the second lowest. Average price of houses with one bedroom are the third lowest. Then, houses with three or five bedrooms have higher average sale price. Average price for houses with four bedrooms are the second highest. To our surprise, mean sale price for houses with no bedroom are the highest. This is not consistent with our hypothesis. Furthermore, if we only look at houses with two or three or four bedrooms, which are the types of houses that are sold most. Although four-bedrooms houses do have highest mean,maximum price and two-bedrooms houses do have lowest minimum and mean price,we can see from figure 4 that the prices in each type are widely distributed.The range of price in each bedroom level are very close,excluding outliers. Therefore, Number of bedrooms are not a significant factor affecting sale price according to our analysis.\n\n####Question3: How does the quality of a house affect its sale price?\n####3A. In Ames, how does sale price varies among different zonings? \nIn our dataset, there are seven different zoning classifications in Ames. There are agriculture, commercial, floating village residential, industrial, residential high density, residential low density, and residential medium density. Intuitively, most people prefer to stay in the residential areas, so houses there should have a relatively high price; on the other hand, in the industrial zone, they tend to have no residential housing built, because it is near factory, and may get pollutions. So houses there should be the least popular.      \n```{r,echo=FALSE, message=FALSE, warning=FALSE, results='hide',fig.height=2.5, fig.width=7}\nggplot(aes(MS.Zoning,fill=GroupPrice),data=house)+\n  geom_bar(position=\"fill\")+\n  scale_fill_brewer(palette=\"Set3\")+\n  xlab(\"Zoning Classifications\")+\n  theme_bw()+\n  ggtitle(\"Figure5: Sale Price of Housing for Different Zoning in Ames\")+\n  ylab(\"Percent\")\n```\nFrom figure 5,we observe that for agriculture, commercial, and industrial zones, houses are only classified in the lowest sale price group. This result is not surprise because nobody want to buy a housing these types of areas, so the sale price of houses should be very low. For floating village residential zone, the biggest fraction is the highest sale price; second highest sale price has the smaller prpopotion; and the second lowest sale price group has even smaller fraction, adn there is no houses in lowest sale price group. For residential high density zone, no houses are recorded in the highest sale price group. The proporion of houses in the second lowest sale price group is the largest, and the second highest sale price group is the smallest. The proportion of second lowest sale price group is in the middle. For residential low density zone, the biggest proportion is the lowest sale price group, and the smallest proportion is the highest sale price group. In conclusion, we can detect that the distribution of sale price is very different for each level of zoning. So the variable zoning classifications (MS.Zoning) affects the sale price in Ames a lot. However we should also notice that there only a few data points for zoning of industrial and agriculture, so this limitation may make our analysis a bit imprecise.\n\n####3B. How does heating type affect the sale price of housing in Ames?\nIn general, most common heating type is the use air as a medium. So the houses with \"air furnace\" may have a relatively high price. Heating type of \"other furnace\" may be the least popular, so houses with such heating type should have relatively low sale price.\n```{r,echo=FALSE, message=FALSE, warning=FALSE, results='hide',fig.height=2, fig.width=7}\nggplot(house, aes(reorder(Heating,SalePrice,mean), SalePrice)) +\n geom_jitter(colour=\"blue\")+\n geom_boxplot(colour=\"green\")+\n geom_point(colour=\"red\")+\n  xlab(\"Heating Type\")+ \n  ylab(\"Sale Price\")+\n  theme_bw()+\n  ggtitle(\"Figure6: Boxplot of Sale Price vs. Heating Type\")+\n  coord_flip()\n```\nBased on figure 6 we observe that the house with heating type of \"air furnace\" has the highest mean sale price; the house with heating type of \"steam\" has the second highest mean sale price; the house with heating type of \"other furnace\" obtains the Lowest mean sale price. In addition, we can see that the sale price changes a lot as the type of heating changes. So the variable Heating Type (Heating) affects the sale price significantly. We should also notice that for heating type \"other furnace\", there are still only a few data points after regrouping. This limitation of data may occur, as we mentioned before, because that \"other furnace\" such as floor furnace or wall furnace was not indeed popular at that time.  \n\n####4.Interaction\n####4.0. Is having air conditioning really important to the sale price of housing? \nAs we mentioned in the introduction, having air conditioning is an important factor to the sale price of housing, we first examine the relation between the sale price and the presence of central air conditioning.\n```{r, echo=FALSE, message=FALSE, warning=FALSE, results='hide',fig.height=2.5, fig.width=7}\nggplot(house, aes(Central.Air, SalePrice)) +\n geom_jitter(color=\"blue\")+\n geom_boxplot(color=\"green\")+\n geom_point(color=\"red\")+\n  xlab(\"Central Air Conditioning\")+\n  ylab(\"Sale Price\")+\n  theme_bw()+\n  ggtitle(\"Figure7: Boxplot of Sale Price vs. the Presence of Air Conditioning\")+\n  coord_flip()\n```\nFigure 7 give us a clear picture of the distribution of sale price of housing with or without central air conditioning. It is obvious that the median of sale price for houses with central air conditioning is much higher than that for houses without central air conditioning, the same happens to maximum. Also notice that the number of houses sola with central air conditioning is much larger than the number of houses sold without central air conditioning. In conclusion, whether having air conditioning affects the sale price of housing remarkably. \n\n####4A.How does Air Conditioning change the relation between Sale Price and the Exterior Wall Material Type?\n\n```{r,echo=FALSE, message=FALSE, warning=FALSE, results='hide',fig.height=3, fig.width=7}\nF2<-ggplot(data=house,aes(reorder(Exterior.1st,SalePrice,median),SalePrice))+geom_jitter(color=\"blue\")+geom_boxplot()+xlab(\"Exterior wall material\")+ylab(\"SalePrice\")+coord_flip()+theme_bw()\nF2+ facet_grid(.~ Central.Air )+ggtitle(\"Figure8: Boxplot of Sale Price vs. Exterior Wall Material Type Facet by Air Conditioning\")\n```\nWe can see from the Figure 8 that the distribution of Sale Price with Central air conditioning is about the same as before. As we mentioned before, houses with Air Conditioning tend to have higher prices, so all levels have large differences between with and without Air conditioning except for Brick Common. We figured that bricks offer excellent high compressive strength so there is not much difference to get a air conditioning for this kind of house. \n\n####4B. Dose having air conditioning influence the relation between number of bedrooms and sale price? \n```{r,echo=FALSE, message=FALSE, warning=FALSE, results='hide',fig.height=2.5, fig.width=7}\nggplot(data=house,aes(reorder(Bedroom.AbvGr,SalePrice,mean),SalePrice))+\n  geom_jitter(colour=\"blue\")+\n  geom_boxplot(colour=\"red\") + facet_wrap(~Central.Air) + \n  coord_flip() +theme_bw()+\n  ggtitle(\"Figure9. Sale Price vs.Number of Bedrooms Facet by Air Conditioning\")+\n  xlab(\"Number of Bedromm\")\n```\nThe left panel of figure 9 indicates the relationship between number of bedrooms and Sale Price for houses without air conditioner. We can see that houses with one bedroom has the lowest mean price, minimum price as well as maximum prices. Houses with two bedroom have second lowest mean price.Houses with three bedrooms have higher mean price than houses with two bedrooms. Therefore, the left faset panel suggest that for house without air conditioner, the more bedrooms it has, the higher sale price would be.\nThe right panel of figure 8 indicates the relationship between number of bedrooms and Sale Price for houses with air conditioner.The graph is very similar to what we analyzed before for general case. There seems to be no apparent relationship between sale price and number of bedrooms for houses with air conditioning. \n\n####4C.How having air conditioning affects the relation between sale price of the housing and heating type?\n```{r,echo=FALSE, message=FALSE, warning=FALSE, results='hide',fig.height=3, fig.width=7}\nggplot(house, aes(reorder(Heating,SalePrice,median), SalePrice)) +\n  geom_jitter(colour=\"blue\")+\n  geom_boxplot(colour=\"green\")+\n  geom_point(colour=\"red\")+\n  xlab(\"Heating Type\")+ \n  ylab(\"Sale Price\")+\n  facet_wrap(~Central.Air)+\n  theme_bw()+\n  #ggtitle(\"Figure10: Boxplot of Sale Price vs. Air Conditioning Faceting by Heating Type\")+\n  coord_flip()\n```\nBased on the figure 10, we notice that given the housing does not have central air conditioning, the median sale price of houses with \"steam\" as heating type is higher than the median sale price of houses with \"air furnace\". However, this is not quite the same for houses with central air conditioning. Given houses with central air conditioning, the median sale price for houses using air furnace is almost the same as the median sale price for houses using other type furnace. This happens may because air conditioning can do both heating and cooling for the house, so the individual heating machine is not that important. Overall, having air conditionning affect the relation between sale price of the housing and heating type. \n\n####Summary of Results/Conclusions:\nType of exterior wall material is an important factor for the sale price of house. Fancier and more expensive material makes a house have higher price. Type of dwelling has large impact on sale price too. Townhouse End Unit and Single-family Detached are more expensive. Therefore, Construction is a very significant factor for the house sale price. For interaction, having Air Conditioning changes the relation between Sale Price and the Exterior Wall Material Type except for material of \"Brick Common\". \nFor the two variables we investigate in structure, we found that they contribute to sale price in various degrees. For living area above ground, the more living area a house has, the higher the sale price tend to be. For number of bedrooms, we found that there are no obvious relationship between number of bedrooms and sale price in general. However, when we facet the relationship by air conditioning, we found that for houses without air conditioning, the more bedrooms it has, the higher the price would be. For houses with air conditioning, there is no significant relationship between number of bedrooms and sale prices. \nFor quality of the house, first, we found that the sale price varies a lot in different zones in Ames. In addition, houses with different heating types also have pretty different sale prices. Overall, both two variables zoning classifications and heating type affect the sale price in a remarkable way. Last, for interaction, in general, having air contioning or not affects the relation between sale price of housing and housing's heating type.   ",
    "created" : 1485811225991.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3897454619",
    "id" : "8C18ED49",
    "lastKnownWriteTime" : 1458504160,
    "last_content_update" : 1458504160,
    "path" : "~/Dropbox/Iowa State/STAT/stat480/Projects/Project3/project3 final.Rmd",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 4,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_markdown"
}